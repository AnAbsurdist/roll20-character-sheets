<!-- TABS
   ============================= -->
<input class="display_string" name="attr_character_settings" type="hidden" value="character">

<!-- TABS & LOGO
   ============================= -->
<div class="tabs">
	<div class="flex">
		<img alt="Shadowrun Sixth World logo" src="https://s3.amazonaws.com/files.d20.io/images/84479331/VxMyZtZk9HJP7kkHGGhyDA/max.png" />
	</div>
	<div class="flex info-flex">
		<div class="grid grid-tab-inputs">
			<!-- CHARACTER NAME -->
			<span data-i18n="character">character</span>
			<label data-i18n-title="c11e" title="character name">
				<input data-i18n-placeholder="c11e" name="attr_character_name" placeholder="character name" title="@{character_name}" type="text" value="" />
			</label>
			<!-- PLAYER NAME -->
			<span data-i18n="player">player</span>
			<label data-i18n-title="p8e" title="player name">
				<input data-i18n-placeholder="p8e" name="attr_player_name" placeholder="player name" title="@{player_name}" type="text" value="" />
			</label>
			<!-- NOTES -->
			<span data-i18n="notes">notes</span>
			<label data-i18n-title="c12s" title="character notes">
				<input data-i18n-placeholder="c12s" name="attr_character_notes" placeholder="character notes" title="@{character_notes}" type="text" value="" />
			</label>
		</div>
	</div>
</div>

<!-- NPC SHEET
   ============================= -->
<div class="npc">
	<div class="box npc-flex">
	</div>
	<div class="box npc-flex">
	</div>
</div>

<!-- PC SHEET
   ============================= -->
<div class="pc">
	<div class="grid grid-tab-buttons">
		<!-- Buttons to toggle on GM whisper -->
		<input class="whisper-toggle" name="attr_gm_toggle" type="hidden"  value=" " />
		<button name="act_whisper" data-i18n-title="gm-whisper" title="gm whisper" type="action">
			<span class="hidden" data-i18n="gm_whisper">gm whisper</span>
			<span class="hidden" name="attr_gm_toggle"></span>
			q
		</button>
		<!-- CHARACTER SHEETS -->
	    <button data-i18n="pc" data-i18n-title="p19n" name="act_toggle_character" title="player character button" type="action">pc</button>
	    <button data-i18n="notes" data-i18n-title="n9n" name="act_toggle_notes" title="notes button" type="action">notes</button>
	    <button data-i18n="npc" data-i18n-title="n16r" name="act_toggle_npc" title="non player character" type="action">npc</button>
	    <input name="attr_wound_toggle" type="hidden"  value="@{wounds}" />
	    <button data-i18n="wounds" name="act_wound" title="@{wound_toggle}" type="action">wounds</button>
		<input name="attr_modifier_toggle" value="?{Modifiers +/-|0}" type="hidden" />
		<button data-i18n="modifiers" name="act_modifier" title="@{modifier_toggle}" type="action">modifiers</button>
		<input name="attr_edge_toggle" type="hidden" value="@{edge}" />
		<button data-i18n="edge" name="act_edge" title="@{edge_toggle}" type="action">edge</button>
		<button title="Roll D6s" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{d6}}}{{base=^{d6}}}{{dice=[[(?{d6s|0}d6>5)]]}}">
			<span class="hidden" data-i18n="roll_d6">roll d6s</span>
			<span class="d6">L</span>
		</button>
		<!-- TAB BUTTONS -->
		<button data-i18n="all" data-i18n-title="tab_all" name="act_tab_all" title="all tabs" type="action">all</button>
		<button data-i18n="core" data-i18n-title="tab_core" name="act_tab_core" title="core tab" type="action">core</button>
		<button data-i18n="arms" data-i18n-title="tab_arms" name="act_tab_arms" title="arms tab" type="action">arms</button>
		<button data-i18n="gear" data-i18n-title="tab_gear" name="act_tab_gear" title="gear tab" type="action">gear</button>
		<button data-i18n="magic" data-i18n-title="tab_magic" name="act_tab_magic" title="magic tab" type="action">magic</button>
		<button data-i18n="matrix" data-i18n-title="tab_matrix" name="act_tab_matrix" title="matrix tab" type="action">matrix</button>
		<button data-i18n="social" data-i18n-title="tab_social" name="act_tab_social" title="social tab" type="action">social</button>
		<button data-i18n="vehicle" data-i18n-title="tab_vehicle" name="act_tab_vehicle" title="vehicle tab" type="action">vehicle</button>
		<button class="pictos" data-i18n-title="tab_options" name="act_tab_options" title="options tab" type="action">y</button>
	</div>

	<div class="flex pc-flex static">
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="personal_data" data-i18-title="personal_data" title="personal data">personal data</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<button class="pictos" data-i18n-title="p23s" name="act_toggle_attributes" title="player character attributes" type="action">y</button>
				<h1 data-i18n="attributes" data-i18-title="attributes" title="attributes">attributes</h1>
			</div>
			<div class="grid grid-attributes">
				<!-- BODY -->
				<div class="grid grid-row">
					<input type="hidden" name="attr_body" value="" />
					<button name="body" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{body}}}{{base=^{attributes}}}{{dice=[[(@{body}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 class="alt-color" data-i18n="body">body</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_body_base"></span>
						<span class="total" name="attr_body"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="b11t" title="body base input">
							<input data-i18n-placeholder="10" name="attr_body_base" placeholder="10" title="@{body_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="permanent modification">mod</h2>
						<label data-i18n-title="b28t" title="body permanent modification input">
							<input data-i18n-placeholder="10" name="attr_body_modifier" placeholder="10" title="@{body_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- AGILITY -->
				<div class="grid grid-row">
					<input type="hidden" name="attr_agility" value="" />
					<button name="agility" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{agility}}}{{base=^{attributes}}}{{dice=[[(@{agility}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 class="alt-color" data-i18n="agility">agility</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_agility_base"></span>
						<span class="total" name="attr_agility"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="a14t" title="agility base input">
							<input data-i18n-placeholder="10" name="attr_agility_base" placeholder="10" title="@{agility_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="permanent modification">mod</h2>
						<label data-i18n-title="a31t" title="agility permanent modification input">
							<input data-i18n-placeholder="10" name="attr_agility_modifier" placeholder="10" title="@{agility_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- REACTION -->
				<div class="grid grid-row">
					<input type="hidden" name="attr_reaction" value="" />
					<button name="reaction" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{reaction}}}{{base=^{attributes}}}{{dice=[[(@{reaction}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 class="alt-color" data-i18n="reaction">reaction</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_reaction_base"></span>
						<span class="total" name="attr_reaction"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="r15t" title="reaction base input">
							<input data-i18n-placeholder="10" name="attr_reaction_base" placeholder="10" title="@{reaction_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="permanent modification">mod</h2>
						<label data-i18n-title="r49t" title="reaction permanent modification input">
							<input data-i18n-placeholder="10" name="attr_reaction_modifier" placeholder="10" title="@{reaction_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- STRENGHT -->
				<div class="grid grid-row">
					<input type="hidden" name="attr_strength" value="" />
					<button name="strength" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{strength}}}{{base=^{attributes}}}{{dice=[[(@{strength}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 class="alt-color" data-i18n="strength">strength</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_strength_base"></span>
						<span class="total" name="attr_strength"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="s15t" title="strength base input">
							<input data-i18n-placeholder="10" name="attr_strength_base" placeholder="10" title="@{strength_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="permanent modification">mod</h2>
						<label data-i18n-title="s32t" title="strength permanent modification input">
							<input data-i18n-placeholder="10" name="attr_strength_modifier" placeholder="10" title="@{strength_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- WILLPOWER -->
				<div class="grid grid-row">
					<input type="hidden" name="attr_willpower" value="" />
					<button name="willpower" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{willpower}}}{{base=^{attributes}}}{{dice=[[(@{willpower}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="willpower">willpower</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_willpower_base"></span>
						<span class="total" name="attr_willpower"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="w16t" title="willpower base input">
							<input data-i18n-placeholder="10" name="attr_willpower_base" placeholder="10" title="@{willpower_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="permanent modification">mod</h2>
						<label data-i18n-title="w51t" title="willpower permanent modification input">
							<input data-i18n-placeholder="10" name="attr_willpower_modifier" placeholder="10" title="@{willpower_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- LOGIC -->
				<div class="grid grid-row">
					<input type="hidden" name="attr_logic" value="" />
					<button name="logic" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{logic}}}{{base=^{attributes}}}{{dice=[[(@{logic}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="logic">logic</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_logic_base"></span>
						<span class="total" name="attr_logic"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="l12t" title="logic base input">
							<input data-i18n-placeholder="10" name="attr_logic_base" placeholder="10" title="@{logic_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="permanent modification">mod</h2>
						<label data-i18n-title="l29t" title="logic permanent modification input">
							<input data-i18n-placeholder="10" name="attr_logic_modifier" placeholder="10" title="@{logic_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- INTUITION -->
				<div class="grid grid-row">
					<input type="hidden" name="attr_intuition" value="" />
					<button name="intuition" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{intuition}}}{{base=^{attributes}}}{{dice=[[(@{intuition}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="intuition">intuition</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_intuition_base"></span>
						<span class="total" name="attr_intuition"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="i16t" title="intuition base input">
							<input data-i18n-placeholder="10" name="attr_intuition_base" placeholder="10" title="@{intuition_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="permanent modification">mod</h2>
						<label data-i18n-title="i33t" title="intuition permanent modification input">
							<input data-i18n-placeholder="10" name="attr_intuition_modifier" placeholder="10" title="@{intuition_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- CHARISMA -->
				<div class="grid grid-row">
					<input type="hidden" name="attr_charisma" value="" />
					<button name="charisma" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{charisma}}}{{base=^{attributes}}}{{dice=[[(@{charisma}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="charisma">charisma</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_charisma_base"></span>
						<span class="total" name="attr_charisma"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="c15t" title="charisma base input">
							<input data-i18n-placeholder="10" name="attr_charisma_base" placeholder="10" title="@{charisma_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="permanent modification">mod</h2>
						<label data-i18n-title="c32t" title="charisma permanent modification input">
							<input data-i18n-placeholder="10" name="attr_charisma_modifier" placeholder="10" title="@{charisma_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- EDGE -->
				<div class="grid grid-row">
					<button name="edge" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{edge}}}{{base=^{attributes}}}{{dice=[[(@{edge}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="edge">edge</h2>
					</button>
					<div class="display bot-border">
						<span class="total" name="attr_edge_max"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="max" data-i18-title="edge_max" title="edge max">max</h2>
						<label data-i18n-title="e7t" title="edge input">
							<input data-i18n-placeholder="3" name="attr_edge_max" placeholder="3" title="@{edge}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- EDGE POINTS -->
				<div class="grid grid-row grid-pc-edge">
					<label data-i18n-title="e7t" title="edge points checkboxes">
						<input name="attr_edge_point" title="@{edge_point}" type="radio" value="1" /><span>1</span>
						<input name="attr_edge_point" title="@{edge_point}" type="radio" value="2" /><span>2</span>
						<input name="attr_edge_point" title="@{edge_point}" type="radio" value="3" /><span>3</span>
						<input name="attr_edge_point" title="@{edge_point}" type="radio" value="4" /><span>4</span>
						<input name="attr_edge_point" title="@{edge_point}" type="radio" value="5" /><span>5</span>
						<input name="attr_edge_point" title="@{edge_point}" type="radio" value="6" /><span>6</span>
						<input name="attr_edge_point" title="@{edge_point}" type="radio" value="7" /><span>7</span>
						<input name="attr_edge_point" title="@{edge_point}" type="radio" value="8" /><span>8</span>
					</label>
				</div>
				<!-- UNARMED -->
				<div class="grid grid-row">
					<input type="hidden" name="attr_unarmed" value="" />
					<button name="unarmed" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{unarmed}}}{{base=^{attributes}}}{{dice=[[(@{edge}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="unarmed">unarmed</h2>
					</button>
					<div class="display bot-border">
						<span class="total" name="attr_unarmed"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="u10t" title="unarmed base input">
							<input data-i18n-placeholder="1" name="attr_unarmed_base" placeholder="1" title="@{unarmed_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="permanent modification">mod</h2>
						<label data-i18n-title="c32t" title="unarmed permanent modification input">
							<input data-i18n-placeholder="0" name="attr_unarmed_modifier" placeholder="0" title="@{unarmed_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
			</div>
			<div class="grid grid-attributes">
				<!-- ESSENCE -->
				<div class="grid grid-row">
					<h2 class="label" data-i18n="essence">essence</h2>
					<div class="display bot-border">
						<span class="total" name="attr_essence"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="current" data-i18-title="c12e" title="current essence">current</h2>
						<label data-i18n-title="e10t" title="essence input">
							<input data-i18n-placeholder="6" name="attr_essence" placeholder="6" title="@{essence}" type="text" value="6" />
						</label>
						<h2 data-i18n="max" data-i18-title="e8x" title="essence max">max</h2>
						<label data-i18n-title="e10t" title="essence max input">
							<input data-i18n-placeholder="6" name="attr_essence_max" placeholder="6" title="@{essence_max}" type="text" value="6" />
						</label>
					</div>
				</div>
				<!-- MAGIC/RESONANCE -->
				<div class="grid grid-row">
					<input type="hidden" name="attr_special" value="3" />
					<h2 class="label" data-i18n="m12e">magic/resonance</h2>
					<div class="display bot-border">
						<span name="attr_special_base"></span>
						<span class="total" name="attr_special"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="m23t" title="magic or resonance base input">
							<input data-i18n-placeholder="6" name="attr_special_base" placeholder="6" title="@{special_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="m35n" title="magic or resonance permanent modification">mod</h2>
						<label data-i18n-title="m40t" title="magic or resonance permanent modification input">
							<input data-i18n-placeholder="10" name="attr_special_modifier" placeholder="10" title="@{special_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- INITIATIVE -->
				<!-- Review -->
				<div class="grid grid-row">
					<button name="initiative" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{initiative}}}{{base=^{attributes}}}{{dice=[[(@{edge}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="initiative">initiative</h2>
					</button>
					<div class="display bot-border">
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<label data-i18n-title="" title="magic or resonance input">
							<input data-i18n-placeholder="6" name="attr_special" placeholder="6" title="@{special}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- MATRIX INITIATIVE-->
				<!-- Review -->
				<div class="grid grid-row">
					<button name="matrix_initiative" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{matrix_initiative}}}{{base=^{attributes}}}{{dice=[[(@{edge}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="matrix_initiative">matrix initiative</h2>
					</button>
					<div class="display bot-border">
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<label data-i18n-title="" title="magic or resonance input">
							<input data-i18n-placeholder="6" name="attr_special" placeholder="6" title="@{special}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- ASTRAL INITIATIVE -->
				<!-- Review -->
				<div class="grid grid-row">
					<button name="astral_initiative" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{astral_initiative}}}{{base=^{attributes}}}{{dice=[[(@{edge}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="astral_initiative">astral initiative</h2>
					</button>
					<div class="display bot-border">
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<label data-i18n-title="" title="magic or resonance input">
							<input data-i18n-placeholder="6" name="attr_special" placeholder="6" title="@{special}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- COMPOSURE -->
				<div class="grid grid-row">
					<button name="roll_unarmed" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{composure}}}{{base=^{attributes}}}{{dice=[[(@{edge}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="composure">composure</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_composure_base"></span>
						<span class="total" name="attr_composure"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="c16t" title="composure base input">
							<input data-i18n-placeholder="1" name="attr_composure_base" placeholder="1" title="@{composure_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="composure permanent modification">mod</h2>
						<label data-i18n-title="c32t" title="composure permanent modification input">
							<input data-i18n-placeholder="0" name="attr_composure_modifier" placeholder="0" title="@{composure_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- JUDGE INTENTIONS -->
				<div class="grid grid-row">
					<button name="roll_unarmed" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{judge_intentions}}}{{base=^{attributes}}}{{dice=[[(@{edge}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="judge_intentions">judge intentions</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_judge_intentions_base"></span>
						<span class="total" name="attr_judge_intentions"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="j22t" title="judge intentions base input">
							<input data-i18n-placeholder="1" name="attr_judge_intentions_base" placeholder="1" title="@{judge_intentiosn_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="j34n" title="judge intentions permanent modification">mod</h2>
						<label data-i18n-title="j39t" title="judge intentions permanent modification input">
							<input data-i18n-placeholder="0" name="attr_judge_intentions_modifier" placeholder="0" title="@{judge_intentions_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- MEMORY -->
				<div class="grid grid-row">
					<button name="roll_unarmed" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{memory}}}{{base=^{attributes}}}{{dice=[[(@{edge}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="memory">memory</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_memory_base"></span>
						<span class="total" name="attr_memory"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="m13t" title="memory base input">
							<input data-i18n-placeholder="1" name="attr_memory_base" placeholder="1" title="@{memory_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="m25n" title="memory permanent modification">mod</h2>
						<label data-i18n-title="m30t" title="memory permanent modification input">
							<input data-i18n-placeholder="0" name="attr_memory_modifier" placeholder="0" title="@{memory_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- LIFT/CARRY -->
				<div class="grid grid-row">
					<button name="roll_unarmed" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{lift_carry}}}{{base=^{attributes}}}{{dice=[[(@{edge}+@{attribute_roll}+@{wound_toggle}+@{modifier_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifier_toggle}]]}}{{wound=[[@{wound_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
						<h2 data-i18n="lift_carry">lift/carry</h2>
					</button>
					<div class="display bot-border">
						<span name="attr_lift_carry_base"></span>
						<span class="total" name="attr_lift_carry"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<label data-i18n-title="u10t" title="lift and carry base input">
							<input data-i18n-placeholder="1" name="attr_lift_carry_base" placeholder="1" title="@{lift_carry_base}" type="text" value="" />
						</label>
						<h2 data-i18n="mod" data-i18-title="p19n" title="lift and carry permanent modification">mod</h2>
						<label data-i18n-title="c32t" title="lift and carry permanent modification input">
							<input data-i18n-placeholder="0" name="attr_lift_carry_modifier" placeholder="0" title="@{lift_carry_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- MOVEMENT -->
				<div class="grid grid-row">
					<h2 class="label" data-i18n="movement">movement</h2>
					<div class="display bot-border">
						<span name="attr_movement"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<!-- Review -->
						<label data-i18n-title="" title="movement base input">
							<input data-i18n-placeholder="1" name="attr_movement_base" placeholder="1" title="@{movement_base}" type="text" value="" />
						</label>
						<!-- Review -->
						<h2 data-i18n="mod" data-i18-title="" title="movement permanent modification">mod</h2>
						<label data-i18n-title="" title="movement permanent modification input">
							<input data-i18n-placeholder="0" name="attr_movement_modifier" placeholder="0" title="@{movement_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
				<!-- DEFENSE RATING -->
				<div class="grid grid-row">
					<h2 class="label" data-i18n="defense_rating">defense rating</h2>
					<div class="display bot-border">
						<span name="attr_defense_rating"></span>
					</div>
					<div class="grid settings">
						<div class="arrow-up"></div>
						<h2 data-i18n="base" data-i18-title="base" title="base">base</h2>
						<!-- Review -->
						<label data-i18n-title="" title="defense rating base input">
							<input data-i18n-placeholder="1" name="attr_defense_rating_base" placeholder="1" title="@{defense_rating_base}" type="text" value="" />
						</label>
						<!-- Review -->
						<h2 data-i18n="mod" data-i18-title="" title="defense rating permanent modification">mod</h2>
						<label data-i18n-title="" title="defense rating permanent modification input">
							<input data-i18n-placeholder="0" name="attr_defense_rating_modifier" placeholder="0" title="@{defense_rating_modifier}" type="text" value="" />
						</label>
					</div>
				</div>
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="skills" data-i18-title="skills" title="skills">skills</h1>
			</div>
			<div class="grid">
			</div>
		</div>
	</div>
	<div class="flex pc-flex core">
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="combat_info" data-i18-title="combat_info" title="core combat info">core combat info</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="condition_monitor" data-i18-title="condition_monitor" title="condition monitor">condition monitor</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="qualities" data-i18-title="qualities" title="qualities">qualities</h1>
			</div>
			<div class="grid">
			</div>
		</div>
	</div>
	<div class="flex pc-flex arms">		
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="ranged_weapons" data-i18-title="ranged_weapons" title="ranged weapons">ranged weapons</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="melee_weapons" data-i18-title="melee_weapons" title="melee weapons">melee weapons</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="armor" data-i18-title="armor" title="armor">armor</h1>
			</div>
			<div class="grid">
			</div>
		</div>
	</div>
	<div class="flex pc-flex gear">
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="augmentations" data-i18-title="augmentations" title="augmentations">augmentations</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="gear" data-i18-title="gear" title="gear">gear</h1>
			</div>
			<div class="grid">
			</div>
		</div>
	</div>
	<div class="flex pc-flex magic">
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="spells" data-i18-title="spells" title="spells">spells</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="preperations" data-i18-title="preperations" title="preperations">preperations</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="rituals" data-i18-title="rituals" title="rituals">rituals</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="a25s" data-i18-title="a25s" title="adept powers or other abilities">adept powers or other abilities</h1>
			</div>
			<div class="grid">
			</div>
		</div>
	</div>
	<div class="flex pc-flex matrix">
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="matrix_stats" data-i18-title="matrix_stats" title="matrix stats">matrix stats</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="complex_forms" data-i18-title="complex_forms" title="complex forms">complex forms</h1>
			</div>
			<div class="grid">
			</div>
		</div>
	</div>
	<div class="flex pc-flex social">
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="i19y" data-i18-title="i19y" title="ids / lifestyles / currency">ids / lifestyles / currency</h1>
			</div>
			<div class="grid">
			</div>
		</div>
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="contacts" data-i18-title="contacts" title="contacts">contacts</h1>
			</div>
			<div class="grid">
			</div>
		</div>
	</div>
	<div class="flex pc-flex vehicle">
		<div class="border">
			<div class="grid grid-header">
				<h1 data-i18n="vehicle" data-i18-title="vehicle" title="vehicle">vehicle</h1>
			</div>
			<div class="grid">
			</div>
		</div>
	</div>
	<div class="flex pc-flex options">
	</div>
</div>

<!-- NOTES SHEET
   ============================= -->
<div class="notes">
</div>

<!-- OPTIONS SHEET
   ============================= -->
<div class="options">
</div>

<!-- FOOTER
   ============================= -->
<div class="footer">
	<span>Disclaimer</span>
	<span>Version </span><span name="attr_version"></span>
</div>

<!-- HIDDEN ATTRIBUTES
   ============================= -->
	<input name="attr_version" type="hidden" value="1" />
	<input type="hidden" name="attr_wounds" value="0" />
	<input type="hidden" name="attr_explode_toggle" value="" />
	<input type="hidden" name="attr_attribute_roll" value="?{Attribute|Body,@{body}|Agility,@{agility}|Reaction,@{reaction}|Strength,@{strength}|Willpower,@{willpower}|Logic,@{logic}|Intuition,@{intuition}|Charisma,@{charisma}|Edge,@{edge}|None,0}" />




<!-- ROLL TEMPLATE
   ============================= -->
<div class="rolltemplates">
	<!--Roll Template for rolling without Focus-->
    <rolltemplate class="sheet-rolltemplate-rolls">
    	<div class="sheet-template-body">
	    	<div class="sheet-template-header">
	    		{{#header}}{{header}}{{/header}}{{#spec}}<span> ({{spec}})</span>{{/spec}}<br />
	    		{{#arm}}<span>{{arm}}</span>{{/arm}}
	    		{{#base}}<span>{{base}}</span>{{/base}}
	    		{{#rollLess() wound 0}}<span> ♦ </span><span data-i18n="wounds">Wounds</span>{{/rollLess() wound 0}}
	    		{{#rollLess() mod 0}}<span> ♦ </span><span data-i18n="modifier">Modifier</span>{{/rollLess() mod 0}}
	    		{{#rollGreater() mod 0}}<span> ♦ </span><span data-i18n="modifier">Modifier</span>{{/rollGreater() mod 0}}
	    		{{#rollGreater() edge 0}}<span> ♦ </span><span data-i18n="edge">Edge</span>{{/rollGreater() edge 0}}
	    	</div>
	    		{{#dice}}<div class="sheet-template-row">{{dice}}</div>{{/dice}}
	    		{{#desc}}
	    			<div class="sheet-template-row">
	    				<span class="sheet-template-desc">
		    				{{desc}}
		    				{{#rollGreater() rea 0}}, <span data-i18n="reach">Reach<span> {{rea}}{{/rollGreater() rea 0}}
		    				{{#rollGreater() drain 1}}, <span data-i18n="drain">Drain</span> {{drain}}{{/rollGreater() drain 1}}
		    				{{#rollLess() drain 2}}, <span data-i18n="drain-2">Drain 2<span>{{/rollLess() drain 2}}
	    				</span>
	    			</div>
	    		{{/desc}}
	    		{{#opp}}<div class="sheet-template-row">{{opp}}</div>{{/opp}}
	    </div>
    </rolltemplate>
</div>
<!-- SCRIPTS
   ============================= -->
<script type="text/worker">

const setAttributes = (update, silent) => { 
	(silent === true) ? setAttrs(update, {silent:true}) : setAttrs(update); 
};


// === ATTRIBUTE ARRAYS
	const global_attributes = {
		attributes: ["body", "agility", "reaction", "strength", "willpower", "logic", "intuition", "charisma", "edge"],
		wounds: ["stun", "physical", "pain_tolerance"],
		lift: ["body", "strength", "lift_carry_modifier"],
		defense: ["reaction", "intuition", "defense_modifier", "defense_temporary", `defense_temp_flag`],
		memory: ["charisma", "willpower", "composure_modifier"],
		composure: ["charisma", "willpower", "composure_modifier"],
		judge: ["charisma", "intuition", "judge_intentions_modifier"],
		initiative: ["reaction", "intuition", "initiative_modifier", "initiative_temporary", "initiative_temp_flag"]
	};

// === ATTRIBUTE CHANGES

// === COMMON ROLLS: MEOMORY, JUDGE INTETIONS, COMPOSURE, LIFT & CARRY, OVERFLOW, DEFENSE, & SOAK ROLLS
	const update_common_rolls = (attrs) => {
		getAttrs(attrs, (v) => {
			const found = attrs.find((mod) => { return mod.includes("_modifier") });
			const name  = found.split("_modifier")[0];
			let numbers = [];
			let update = {};

			_.each(array, (attr) => { numbers.push(parseInt(v[`${attr}`]) || 0); });
        	const add   = (a, b) => a + b, sum = numbers.reduce(add);
        	update[`${name}`] = sum

        	setAttributes(update, true);
		});
	};

// === EDGE TOGGLES, include ! for exploding dice
	on("change:edge_toggle", () => {
		getAttrs(["edge_toggle"], (v) =>{
			const update = {
				explode_toggle: (v.edge_toggle != 0) ? "!" : ""
			};
			setAttributes(update, true);
		});
	});

// === SETTINGS TOGGLES
	const sheets = ["character", "npc", "notes"];

    //Switch between sheet types.
    sheets.forEach(attr => {
        on(`clicked:toggle_${attr}`, (eventinfo) => {
            const update = {
				character_settings: eventinfo.triggerName.split("_")[1]
			};
			setAttributes(update, true);
        });
    });

// === GM WHISPER TOGGLES
	on("clicked:whisper", (eventinfo) => {
		getAttrs(["gm_toggle"], (v) => {
			const update = {
				gm_toggle : (v.gm_toggle.includes("gm")) ?  " " : "/w gm"
			};
			setAttributes(update, true);
		});
	});

// === ON OPEN SCRIPTS
	on("sheet:opened", () => {
		getAttrs(["version"], (v) => { versioning(parseFloat(v.version) || 1); });

		//translations(); Commented out until later. It needs the translation files.
	});	

// === ROLL QUERY TRANSLATIONS
	const translations = () => {
		let translations = [];
		let attributes = ["attribute", "body", "agility", "reaction", "strength", "willpower", "logic", "intuition", "charisma", "edge", "none"];
		attributes.forEach((attribute) => {
			translations.push(getTranslationByKey(attribute));
		});

		let attribute_roll = `?{${translations[0]}`;
	    for (i = 1; i <= (attributes.length - 2); i += 1) {
	    	attribute_roll +=  `|${translations[i]},@{${attributes[i]}}`;
	    };
	    attribute_roll += `|${translations[10]},0}`; //For None

	    setAttributes(attribute_roll, true);
	};		

// === SHEET VERSIONING
	const versioning = (version) => {
	   console.log(`%c Versioning, ${version}`, "color: blue; font-weight:bold");
	   if (version >= 1) {
			console.log(`%c Version is update to date`, "color: maroon; font-weight:bold");
	    } else {
			setAttrs({version: 1}, () => {versioning(1)});
		};
	};


</script>